"use strict";(self.webpackChunkluminescent_team=self.webpackChunkluminescent_team||[]).push([[364423],{603905:(e,t,n)=>{n.d(t,{Zo:()=>m,kt:()=>h});var a=n(667294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=a.createContext({}),s=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=s(e.components);return a.createElement(c.Provider,{value:t},e.children)},p="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,r=e.originalType,c=e.parentName,m=l(e,["components","mdxType","originalType","parentName"]),p=s(n),d=i,h=p["".concat(c,".").concat(d)]||p[d]||u[d]||r;return n?a.createElement(h,o(o({ref:t},m),{},{components:n})):a.createElement(h,o({ref:t},m))}));function h(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var r=n.length,o=new Array(r);o[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l[p]="string"==typeof e?e:i,o[1]=l;for(var s=2;s<r;s++)o[s]=n[s];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},946890:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>r,metadata:()=>l,toc:()=>s});var a=n(487462),i=(n(667294),n(603905));const r={},o="Scripting introduction",l={unversionedId:"scripting/introduction",id:"scripting/introduction",title:"Scripting introduction",description:"Scripting in BDSP allows you to influence different parts of the game.",source:"@site/rom-hacking/scripting/introduction.md",sourceDirName:"scripting",slug:"/scripting/introduction",permalink:"/luminescent-team-dev/rom-hacking/scripting/introduction",draft:!1,tags:[],version:"current",frontMatter:{},sidebar:"docs",previous:{title:"Scripting Basics",permalink:"/luminescent-team-dev/rom-hacking/scripting/setup/scripting-guide"},next:{title:"PlaceData",permalink:"/luminescent-team-dev/rom-hacking/scripting/place-data"}},c={},s=[{value:"Functions",id:"functions",level:2},{value:"Naming schemes",id:"naming-schemes",level:3},{value:"Type",id:"type",level:4},{value:"Zone code",id:"zone-code",level:4},{value:"Function name",id:"function-name",level:4},{value:"Example function names",id:"example-function-names",level:4},{value:"Comments",id:"comments",level:3},{value:"How to make the game run your functions",id:"how-to-make-the-game-run-your-functions",level:3},{value:"Flags",id:"flags",level:2},{value:"Example",id:"example",level:3},{value:"PlaceData quirks",id:"placedata-quirks",level:2},{value:"Text output buffer",id:"text-output-buffer",level:2}],m={toc:s},p="wrapper";function u(e){let{components:t,...n}=e;return(0,i.kt)(p,(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"scripting-introduction"},"Scripting introduction"),(0,i.kt)("p",null,"Scripting in BDSP allows you to influence different parts of the game."),(0,i.kt)("p",null,"Be it showing dialogues, moving NPCs and the player around and setting various flags to make the game work."),(0,i.kt)("h2",{id:"functions"},"Functions"),(0,i.kt)("p",null,"Functions are written in ",(0,i.kt)("inlineCode",{parentName:"p"},".ev")," files. These can be edited by unpacking the file ",(0,i.kt)("inlineCode",{parentName:"p"},"romfs/Data/StreamingAssets/AssetAssistant/Dpr/ev_script")," using ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/Ai0796/BDSP-Repacker"},"Aldo's BDSP Repacker"),"."),(0,i.kt)("p",null,"Each zone has it's own script file. The name is the ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/dictionary/zones"},"Zone")," code. For example ",(0,i.kt)("inlineCode",{parentName:"p"},"c01.ev")," for Jubilife City."),(0,i.kt)("p",null,"These script files contain two different types of function that serve different purposes."),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Script functions"),(0,i.kt)("li",{parentName:"ul"},"Animation functions")),(0,i.kt)("h3",{id:"naming-schemes"},"Naming schemes"),(0,i.kt)("p",null,"Function naming should follow this scheme: ",(0,i.kt)("inlineCode",{parentName:"p"},"{type}_{zone_code}_{function_name}"),"."),(0,i.kt)("p",null,"This is not strictly necessary, but strongly recommended to keep things organized."),(0,i.kt)("h4",{id:"type"},"Type"),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"Type"),(0,i.kt)("th",{parentName:"tr",align:null},"Description"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ev"),(0,i.kt)("td",{parentName:"tr",align:null},"Script functions called by ",(0,i.kt)("a",{parentName:"td",href:"/luminescent-team-dev/rom-hacking/scripting/place-data"},"PlaceData"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"pos"),(0,i.kt)("td",{parentName:"tr",align:null},"Script functions called by ",(0,i.kt)("a",{parentName:"td",href:"/luminescent-team-dev/rom-hacking/scripting/stop-data"},"StopData"))),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"anm"),(0,i.kt)("td",{parentName:"tr",align:null},"Animation functions")))),(0,i.kt)("h4",{id:"zone-code"},"Zone code"),(0,i.kt)("p",null,"The zone code in lowercase letters. ",(0,i.kt)("inlineCode",{parentName:"p"},"c01")," for Jubilife City or ",(0,i.kt)("inlineCode",{parentName:"p"},"r201")," for Route 201."),(0,i.kt)("p",null,"See ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/dictionary/zones"},"Zones")," for a list of zones."),(0,i.kt)("h4",{id:"function-name"},"Function name"),(0,i.kt)("p",null,"The actual name your function should have. Try to keep this as descriptive as possible, to make reading the code easier."),(0,i.kt)("p",null,"Something like ",(0,i.kt)("inlineCode",{parentName:"p"},"cynthia_give_egg")," or even just ",(0,i.kt)("inlineCode",{parentName:"p"},"rival")," if this is the rival talking function of the zone."),(0,i.kt)("h4",{id:"example-function-names"},"Example function names"),(0,i.kt)("p",null,"Here are some example function names:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"ev_c01_rival\nanm_c01_rival\npos_r207_galactic_blocker\n")),(0,i.kt)("h3",{id:"comments"},"Comments"),(0,i.kt)("p",null,"To make a comment, simply add a semicolon ",(0,i.kt)("inlineCode",{parentName:"p"},";")," and type your comment."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"ev_c01_greet_player:; This function makes the professor greet the player\n")),(0,i.kt)("h3",{id:"how-to-make-the-game-run-your-functions"},"How to make the game run your functions"),(0,i.kt)("p",null,"There are four main ways to make the game run your custom functions."),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},"Calling your function from a map script (usually defined in the ",(0,i.kt)("inlineCode",{parentName:"li"},"sp_{zone_code}.ev")," file)"),(0,i.kt)("li",{parentName:"ol"},"Referencing your function name in the ",(0,i.kt)("inlineCode",{parentName:"li"},"TalkLabel")," of a ",(0,i.kt)("a",{parentName:"li",href:"/luminescent-team-dev/rom-hacking/scripting/place-data"},"PlaceData")),(0,i.kt)("li",{parentName:"ol"},"Referencing your function name in the ",(0,i.kt)("inlineCode",{parentName:"li"},"ContactLabel")," of a ",(0,i.kt)("a",{parentName:"li",href:"/luminescent-team-dev/rom-hacking/scripting/stop-data"},"StopData")),(0,i.kt)("li",{parentName:"ol"},"Calling your function from another function that's already in the script using a ",(0,i.kt)("a",{parentName:"li",href:"/luminescent-team-dev/rom-hacking/scripting/commands/logic/jump"},"_JUMP")," or a ",(0,i.kt)("a",{parentName:"li",href:"/luminescent-team-dev/rom-hacking/scripting/commands/logic/call"},"_CALL")," function")),(0,i.kt)("h2",{id:"flags"},"Flags"),(0,i.kt)("p",null,"Flags are a way to store various data about your game state. Flags can either be set (1) using ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/commands/gamedata/flag-set"},"_FLAG_SET")," or reset (0) using ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/commands/gamedata/flag-reset"},"_FLAG_RESET"),"."),(0,i.kt)("h3",{id:"example"},"Example"),(0,i.kt)("p",null,"Here is an example of a legendary being fought, despawned and then made sure it is not encounterable again."),(0,i.kt)("p",null,"Part of the ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/place-data"},"PlaceData")," of the legendary:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},'{\n    "ID": "C01_DARKRAI",\n    "zoneID": 0,\n    [...],\n    "TalkLabel": "ev_c01_darkrai",\n    "ContactLabel": "",\n    "Work": 3000,\n    [...]\n}\n')),(0,i.kt)("p",null,"The function that handles the Darkrai event:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-c"},"ev_c01_darkrai:\n_SP_WILD_BTL_SET(491, 80); Fight Darkrai\n_OBJ_DEL('C01_DARKRAI'); Hide Darkrai - this also sets the flag 3000 for us\n_END()\n")),(0,i.kt)("h2",{id:"placedata-quirks"},"PlaceData quirks"),(0,i.kt)("p",null,"The ",(0,i.kt)("inlineCode",{parentName:"p"},"Work")," value of a ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/place-data"},"PlaceData")," is only checked when entering the ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/dictionary/zones"},"Zone"),"."),(0,i.kt)("p",null,"This means if you change the Flag state of a ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/place-data"},"PlaceData")," in the ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/dictionary/zones"},"Zone")," you are currently in, this will not be effective until you exit and re-enter that ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/dictionary/zones"},"Zone"),"."),(0,i.kt)("p",null,"For example to make an object disappear in the future, starting the moment you are in the ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/dictionary/zones"},"Zone"),", you need to both set the Flag using ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/commands/gamedata/flag-set"},"_FLAG_SET")," and ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/commands/interface/obj-del"},"_OBJ_DEL"),"."),(0,i.kt)("p",null,"The same goes for ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/commands/gamedata/flag-reset"},"_FLAG_RESET")," and ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/commands/interface/obj-add"},"_OBJ_ADD")," if you want to make a ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/scripting/place-data"},"PlaceData")," appear and make it stay even when the ",(0,i.kt)("a",{parentName:"p",href:"/luminescent-team-dev/rom-hacking/dictionary/zones"},"Zone")," is reloaded."),(0,i.kt)("h2",{id:"text-output-buffer"},"Text output buffer"),(0,i.kt)("p",null,"There are different functions for displaying textboxes."),(0,i.kt)("p",null,"Textboxes get their content from JSON-Files. This is done in Scripting."),(0,i.kt)("p",null,"These JSON-Files house all the text used in the game and can be referenced whenever to get the text to display it in a textbox."),(0,i.kt)("p",null,"Some texts have placeholder values. These can be replaced with any text from the buffer."),(0,i.kt)("p",null,"The easiest way is to use ",(0,i.kt)("inlineCode",{parentName:"p"},"_MACRO_*")," commands. If you use these, ev-as converts these into text for you. Depending on which Tags you use, you may need to manually edit the Tag list in the JSON-File."))}u.isMDXComponent=!0}}]);